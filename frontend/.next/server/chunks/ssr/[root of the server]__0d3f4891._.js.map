{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ntype User = {\r\n  username: string;\r\n  role: string;\r\n  hasBusiness: boolean;\r\n};\r\n\r\nexport default function Navbar() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Fetch user from backend using cookie (you should build this endpoint)\r\n    const fetchUser = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:5000/api/auth/me\", {\r\n          credentials: \"include\",\r\n        });\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setUser(data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch user\", err);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const handleLogout = async () => {\r\n    await fetch(\"http://localhost:5000/api/auth/logout\", {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n    });\r\n    setUser(null);\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <nav className=\"bg-blue-600 text-white px-6 py-3 flex items-center justify-between\">\r\n      <Link href=\"/\" className=\"font-bold text-lg\">\r\n        Business Directory\r\n      </Link>\r\n\r\n      <div className=\"flex items-center gap-4\">\r\n        <Link href=\"/\" className=\"hover:underline\">\r\n          Home\r\n        </Link>\r\n\r\n        {!user ? (\r\n          <>\r\n            <Link href=\"/login\" className=\"hover:underline\">\r\n              Login\r\n            </Link>\r\n            <Link href=\"/register\" className=\"hover:underline\">\r\n              Register\r\n            </Link>\r\n          </>\r\n        ) : (\r\n          <div className=\"relative group\">\r\n            <button className=\"font-semibold\">\r\n              {user.username} â–¾\r\n            </button>\r\n            <div className=\"absolute hidden group-hover:block bg-white text-black right-0 mt-2 w-48 shadow-md rounded p-2 z-50\">\r\n              <p className=\"px-3 py-1 text-sm font-medium\">\r\n                Role: {user.role}\r\n              </p>\r\n              <hr />\r\n              {user.role === \"Admin\" && (\r\n                <Link\r\n                  href=\"/admin\"\r\n                  className=\"block px-3 py-1 hover:bg-gray-100 rounded\"\r\n                >\r\n                  Admin Dashboard\r\n                </Link>\r\n              )}\r\n\r\n              {user.role === \"Business Owner\" && (\r\n                <>\r\n                  {user.hasBusiness ? (\r\n                    <Link\r\n                      href=\"/update-business\"\r\n                      className=\"block px-3 py-1 hover:bg-gray-100 rounded\"\r\n                    >\r\n                      Update Business\r\n                    </Link>\r\n                  ) : (\r\n                    <Link\r\n                      href=\"/add-business\"\r\n                      className=\"block px-3 py-1 hover:bg-gray-100 rounded\"\r\n                    >\r\n                      Add Business\r\n                    </Link>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              {user.role === \"User\" && (\r\n                <Link\r\n                  href=\"/upgrade-role\"\r\n                  className=\"block px-3 py-1 hover:bg-gray-100 rounded\"\r\n                >\r\n                  Become Business Owner\r\n                </Link>\r\n              )}\r\n\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"block px-3 py-1 hover:bg-gray-100 text-left w-full rounded\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAWe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAE9C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,wEAAwE;QACxE,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,qCAAqC;oBAC3D,aAAa;gBACf;gBACA,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,wBAAwB;YACxC;QACF;QACA;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,MAAM,MAAM,yCAAyC;YACnD,QAAQ;YACR,aAAa;QACf;QACA,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,4JAAA,CAAA,UAAI;gBAAC,MAAK;gBAAI,WAAU;0BAAoB;;;;;;0BAI7C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAkB;;;;;;oBAI1C,CAAC,qBACA;;0CACE,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAS,WAAU;0CAAkB;;;;;;0CAGhD,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAY,WAAU;0CAAkB;;;;;;;qDAKrD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,WAAU;;oCACf,KAAK,QAAQ;oCAAC;;;;;;;0CAEjB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;;4CAAgC;4CACpC,KAAK,IAAI;;;;;;;kDAElB,8OAAC;;;;;oCACA,KAAK,IAAI,KAAK,yBACb,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;oCAKF,KAAK,IAAI,KAAK,kCACb;kDACG,KAAK,WAAW,iBACf,8OAAC,4JAAA,CAAA,UAAI;4CACH,MAAK;4CACL,WAAU;sDACX;;;;;iEAID,8OAAC,4JAAA,CAAA,UAAI;4CACH,MAAK;4CACL,WAAU;sDACX;;;;;;;oCAON,KAAK,IAAI,KAAK,wBACb,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;kDAKH,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf","debugId":null}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/components/UserContext.tsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\ntype User = {\r\n  username: string;\r\n  role: string;\r\n  hasBusiness: boolean;\r\n} | null;\r\n\r\ntype UserContextType = {\r\n  user: User;\r\n  setUser: (user: User) => void;\r\n};\r\n\r\nconst UserContext = createContext<UserContextType>({\r\n  user: null,\r\n  setUser: () => {},\r\n});\r\n\r\nexport const useUser = () => useContext(UserContext);\r\n\r\nexport const UserProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<User>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:5000/api/auth/me\", {\r\n          credentials: \"include\",\r\n        });\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setUser(data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching user\", err);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, setUser }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAcA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IACjD,MAAM;IACN,SAAS,KAAO;AAClB;AAEO,MAAM,UAAU,IAAM,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;AAEjC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAQ;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,qCAAqC;oBAC3D,aAAa;gBACf;gBACA,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;YACvC;QACF;QACA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;QAAQ;kBAC1C;;;;;;AAGP","debugId":null}}]
}