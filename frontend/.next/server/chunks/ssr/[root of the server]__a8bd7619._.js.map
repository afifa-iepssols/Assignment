{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Desktop/project/Business-Directory/Business-Directory/frontend/src/app/components/UserContext.tsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\ntype User = {\r\n  username: string;\r\n  role: string;\r\n  hasBusiness: boolean;\r\n} | null;\r\n\r\ntype UserContextType = {\r\n  user: User;\r\n  setUser: (user: User) => void;\r\n  loading: boolean;\r\n};\r\n\r\nconst UserContext = createContext<UserContextType>({\r\n  user: null,\r\n  setUser: () => {},\r\n  loading: true,\r\n});\r\n\r\nexport const useUser = () => useContext(UserContext);\r\n\r\nexport const UserProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<User>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:5000/api/auth/me\", {\r\n          credentials: \"include\",\r\n        });\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setUser(data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching user\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, setUser, loading }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAeA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IACjD,MAAM;IACN,SAAS,KAAO;IAChB,SAAS;AACX;AAEO,MAAM,UAAU,IAAM,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;AAEjC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAQ;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,qCAAqC;oBAC3D,aAAa;gBACf;gBACA,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;YACvC,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAQ;kBACnD;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Desktop/project/Business-Directory/Business-Directory/frontend/src/app/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\nimport { useUser } from \"./UserContext\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  Menu,\r\n  LogOut,\r\n  User,\r\n  PlusCircle,\r\n  Home,\r\n  Briefcase,\r\n  Shield,\r\n  ChevronDown,\r\n} from \"lucide-react\";\r\n\r\nexport default function Navbar() {\r\n  const router = useRouter();\r\n  const { user, setUser } = useUser();\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const res = await fetch(\"http://localhost:5000/api/auth/me\", {\r\n          credentials: \"include\",\r\n        });\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setUser(data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch user\", err);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, [setUser]);\r\n\r\n  const handleLogout = async () => {\r\n    await fetch(\"http://localhost:5000/api/auth/logout\", {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n    });\r\n    setUser(null);\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <nav className=\"bg-sky-800 text-white px-4 py-10 sticky top-0 z-50 shadow-md\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <Link href=\"/\" className=\"font-bold text-lg flex items-center gap-2\">\r\n          <Briefcase className=\"w-5 h-5\" />\r\n          Business Directory\r\n        </Link>\r\n\r\n        {/* Mobile Menu Toggle */}\r\n        <div className=\"sm:hidden\">\r\n          <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>\r\n            <Menu className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Desktop Links */}\r\n        <div className=\"hidden sm:flex items-center gap-4\">\r\n          <Link href=\"/\" className=\"hover:underline flex items-center gap-1\">\r\n            <Home className=\"w-4 h-4\" /> Home\r\n          </Link>\r\n\r\n          {!user ? (\r\n            <>\r\n              <Link href=\"/login\" className=\"hover:underline flex items-center gap-1\">\r\n                <User className=\"w-4 h-4\" /> Login\r\n              </Link>\r\n              <Link href=\"/register\" className=\"hover:underline flex items-center gap-1\">\r\n                <PlusCircle className=\"w-4 h-4\" /> Register\r\n              </Link>\r\n            </>\r\n          ) : (\r\n            <div className=\"relative group\">\r\n                {/* Username + Icon */}\r\n                <div className=\"flex items-center gap-1 font-semibold cursor-pointer\">\r\n                    <User className=\"w-4 h-4\" />\r\n                    {user.username}\r\n                    <ChevronDown className=\"w-4 h-4\" />\r\n                </div>\r\n\r\n                {/* Dropdown Menu */}\r\n                <div className=\"absolute right-0 mt-2 w-56 bg-white text-black shadow-md rounded p-2 z-50\r\n                                invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-150\">\r\n                    <p className=\"px-3 py-1 text-sm font-medium\">Role: {user.role}</p>\r\n                    <hr className=\"my-1\" />\r\n\r\n                    {user.role === \"Admin\" && (\r\n                    <Link href=\"/adminPage\" className=\"block px-3 py-1 hover:bg-gray-100 rounded flex items-center\">\r\n                        <Shield className=\"inline w-4 h-4 mr-2\" />\r\n                        Admin Dashboard\r\n                    </Link>\r\n                    )}\r\n\r\n                    {user.role === \"Business Owner\" && (\r\n                      <>\r\n                        <Link\r\n                          href=\"/AddBusiness\"\r\n                          className=\"block px-3 py-1 hover:bg-gray-100 rounded\"\r\n                        >\r\n                          Add Business\r\n                        </Link>\r\n                      </>\r\n                    )}\r\n\r\n\r\n\r\n                    <button\r\n                    onClick={handleLogout}\r\n                    className=\"block px-3 py-1 hover:bg-gray-100 text-left w-full rounded flex items-center\"\r\n                    >\r\n                    <LogOut className=\"w-4 h-4 mr-2\" />\r\n                    Logout\r\n                    </button>\r\n                </div>\r\n                </div>\r\n\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Dropdown */}\r\n      {mobileMenuOpen && (\r\n        <div className=\"sm:hidden mt-3 flex flex-col gap-2\">\r\n          <Link href=\"/\" className=\"hover:underline flex items-center gap-1\">\r\n            <Home className=\"w-4 h-4\" /> Home\r\n          </Link>\r\n\r\n          {!user ? (\r\n            <>\r\n              <Link href=\"/login\" className=\"hover:underline flex items-center gap-1\">\r\n                <User className=\"w-4 h-4\" /> Login\r\n              </Link>\r\n              <Link href=\"/register\" className=\"hover:underline flex items-center gap-1\">\r\n                <PlusCircle className=\"w-4 h-4\" /> Register\r\n              </Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <p className=\"text-sm font-medium\">Role: {user.role}</p>\r\n\r\n              {user.role === \"Admin\" && (\r\n                <Link href=\"/adminPage\" className=\"hover:underline flex items-center gap-1\">\r\n                  <Shield className=\"w-4 h-4\" /> Admin Dashboard\r\n                </Link>\r\n              )}\r\n              {user.role === \"Business Owner\" &&\r\n                (user.hasBusiness ? (\r\n                  <Link href=\"/update-business\" className=\"hover:underline\">\r\n                    Update Business\r\n                  </Link>\r\n                ) : (\r\n                  <Link href=\"/add-business\" className=\"hover:underline\">\r\n                    Add Business\r\n                  </Link>\r\n                ))}\r\n              {user.role === \"User\" && (\r\n                <Link href=\"/upgrade-role\" className=\"hover:underline\">\r\n                  Become Business Owner\r\n                </Link>\r\n              )}\r\n\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"hover:underline text-left flex items-center gap-1 cursor-pointer\"\r\n              >\r\n                <LogOut className=\"w-4 h-4\" /> Logout\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;;;;;;;AAgBe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAChC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,qCAAqC;oBAC3D,aAAa;gBACf;gBACA,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,QAAQ;gBACV;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,wBAAwB;YACxC;QACF;QACA;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,eAAe;QACnB,MAAM,MAAM,yCAAyC;YACnD,QAAQ;YACR,aAAa;QACf;QACA,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACvB,8OAAC,4MAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAKnC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAO,SAAS,IAAM,kBAAkB,CAAC;sCACxC,cAAA,8OAAC,kMAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAKpB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAI,WAAU;;kDACvB,8OAAC,mMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;4BAG7B,CAAC,qBACA;;kDACE,8OAAC,4JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAS,WAAU;;0DAC5B,8OAAC,kMAAA,CAAA,OAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAE9B,8OAAC,4JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAY,WAAU;;0DAC/B,8OAAC,kNAAA,CAAA,aAAU;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;6DAItC,8OAAC;gCAAI,WAAU;;kDAEX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,kMAAA,CAAA,OAAI;gDAAC,WAAU;;;;;;4CACf,KAAK,QAAQ;0DACd,8OAAC,oNAAA,CAAA,cAAW;gDAAC,WAAU;;;;;;;;;;;;kDAI3B,8OAAC;wCAAI,WAAU;;0DAEX,8OAAC;gDAAE,WAAU;;oDAAgC;oDAAO,KAAK,IAAI;;;;;;;0DAC7D,8OAAC;gDAAG,WAAU;;;;;;4CAEb,KAAK,IAAI,KAAK,yBACf,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAa,WAAU;;kEAC9B,8OAAC,sMAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;oDAAwB;;;;;;;4CAK7C,KAAK,IAAI,KAAK,kCACb;0DACE,cAAA,8OAAC,4JAAA,CAAA,UAAI;oDACH,MAAK;oDACL,WAAU;8DACX;;;;;;;0DAQL,8OAAC;gDACD,SAAS;gDACT,WAAU;;kEAEV,8OAAC,0MAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;oDAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAWhD,gCACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACvB,8OAAC,mMAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;oBAG7B,CAAC,qBACA;;0CACE,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAS,WAAU;;kDAC5B,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAE9B,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAY,WAAU;;kDAC/B,8OAAC,kNAAA,CAAA,aAAU;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;qDAItC;;0CACE,8OAAC;gCAAE,WAAU;;oCAAsB;oCAAO,KAAK,IAAI;;;;;;;4BAElD,KAAK,IAAI,KAAK,yBACb,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAa,WAAU;;kDAChC,8OAAC,sMAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;oCAAY;;;;;;;4BAGjC,KAAK,IAAI,KAAK,oBACb,CAAC,KAAK,WAAW,iBACf,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAmB,WAAU;0CAAkB;;;;;qDAI1D,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAgB,WAAU;0CAAkB;;;;;oCAGxD;4BACF,KAAK,IAAI,KAAK,wBACb,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAgB,WAAU;0CAAkB;;;;;;0CAKzD,8OAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,8OAAC,0MAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;;;AAQ9C","debugId":null}}]
}