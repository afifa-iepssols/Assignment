{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Desktop/project/Business-Directory/Business-Directory/frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useUser } from '../components/UserContext'\r\n\r\nexport default function LoginPage() {\r\n  const [formData, setFormData] = useState({ username: '', password: '' });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const router = useRouter();\r\n  const { setUser } = useUser();\r\n\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    setError('');\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/auth/login', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || 'Login failed');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userRes = await fetch(\"http://localhost:5000/api/auth/me\", {\r\n        credentials: \"include\",\r\n      });\r\n      if (userRes.ok) {\r\n        const userData = await userRes.json();\r\n        setUser(userData);\r\n      }\r\n      router.push('/');\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError('Something went wrong. Please try again.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-10 p-6 border rounded shadow bg-white\">\r\n      <h1 className=\"text-2xl font-semibold mb-4 text-center text-neutral-900\">Login</h1>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n        {/* Username */}\r\n        <div>\r\n          <label className=\"block mb-1 font-medium text-neutral-900\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full p-2 border rounded text-neutral-900\"\r\n          />\r\n        </div>\r\n\r\n        {/* Password */}\r\n        <div>\r\n          <label className=\"block mb-1 font-medium text-neutral-900\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full p-2 border rounded text-neutral-900\"\r\n          />\r\n        </div>\r\n\r\n        {/* Error */}\r\n        {error && (\r\n          <p className=\"text-sm text-red-500 text-center\">{error}</p>\r\n        )}\r\n\r\n        {/* Submit Button */}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full py-2 px-4 bg-sky-800 text-white rounded hover:opacity-80 transition-opacity\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? 'Logging in...' : 'Login'}\r\n        </button>\r\n\r\n        {/* Go to Register */}\r\n        <p className=\"text-center mt-2 text-sm text-neutral-700\">\r\n          Donâ€™t have an account?{' '}\r\n          <span\r\n            className=\"text-blue-600 cursor-pointer underline\"\r\n            onClick={() => router.push('/register')}\r\n          >\r\n            Register\r\n          </span>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,UAAU;QAAI,UAAU;IAAG;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,2IAAA,CAAA,UAAO,AAAD;IAG1B,MAAM,eAAe,CAAC;QACpB,YAAY;YAAE,GAAG,QAAQ;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;QAC3D,SAAS;IACX;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,wCAAwC;gBAC9D,QAAQ;gBACR,aAAa;gBACb,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,SAAS,KAAK,OAAO,IAAI;gBACzB,WAAW;gBACX;YACF;YAEA,MAAM,UAAU,MAAM,MAAM,qCAAqC;gBAC/D,aAAa;YACf;YACA,IAAI,QAAQ,EAAE,EAAE;gBACd,MAAM,WAAW,MAAM,QAAQ,IAAI;gBACnC,QAAQ;YACV;YACA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,SAAS;YACT,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA2D;;;;;;0BACzE,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCAGtC,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAC3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,OAAO,SAAS,QAAQ;gCACxB,UAAU;gCACV,QAAQ;gCACR,WAAU;;;;;;;;;;;;kCAKd,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAC3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,OAAO,SAAS,QAAQ;gCACxB,UAAU;gCACV,QAAQ;gCACR,WAAU;;;;;;;;;;;;oBAKb,uBACC,6LAAC;wBAAE,WAAU;kCAAoC;;;;;;kCAInD,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU;kCAET,UAAU,kBAAkB;;;;;;kCAI/B,6LAAC;wBAAE,WAAU;;4BAA4C;4BAChC;0CACvB,6LAAC;gCACC,WAAU;gCACV,SAAS,IAAM,OAAO,IAAI,CAAC;0CAC5B;;;;;;;;;;;;;;;;;;;;;;;;AAOX;GA3GwB;;QAIP,qIAAA,CAAA,YAAS;QACJ,2IAAA,CAAA,UAAO;;;KALL","debugId":null}}]
}