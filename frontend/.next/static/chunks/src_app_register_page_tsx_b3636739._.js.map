{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/register/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\nexport default function RegisterPage() {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    fullname: '',\r\n    password: '',\r\n    role: 'user',\r\n  });\r\n\r\n  const [error, setError] = useState({\r\n    username: '',\r\n    general: '',\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    setError({ username: '', general: '' }); // reset error on typing\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError({ username: '', general: '' });\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/auth/register', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        if (data.message.includes('Username')) {\r\n          setError(prev => ({ ...prev, username: data.message }));\r\n        } else {\r\n          setError(prev => ({ ...prev, general: data.message }));\r\n        }\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // ✅ Successfully registered — maybe redirect or show success\r\n      alert('Registered successfully!');\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(prev => ({ ...prev, general: 'Something went wrong. Please try again.' }));\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-10 p-6 border rounded shadow bg-white\">\r\n      <h1 className=\"text-2xl font-semibold mb-4 text-center text-neutral-900\">Register</h1>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n        {/* Username */}\r\n        <div>\r\n          <label className=\"block mb-1 font-medium text-neutral-900\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full p-2 border rounded text-neutral-900\"\r\n          />\r\n          {error.username && (\r\n            <p className=\"text-sm text-red-500 mt-1\">{error.username}</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Full Name */}\r\n        <div>\r\n          <label className=\"block mb-1 font-medium text-neutral-900\">Full Name</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"fullname\"\r\n            value={formData.fullname}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full p-2 border rounded text-neutral-900\"\r\n          />\r\n        </div>\r\n\r\n        {/* Password */}\r\n        <div>\r\n          <label className=\"block mb-1 font-medium text-neutral-900\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full p-2 border rounded text-neutral-900\"\r\n          />\r\n        </div>\r\n\r\n        {/* Role */}\r\n        <div>\r\n          <label className=\"block mb-1 font-medium text-neutral-900\">Role</label>\r\n          <select\r\n            name=\"role\"\r\n            value={formData.role}\r\n            onChange={handleChange}\r\n            className=\"w-full p-2 border rounded text-neutral-900\"\r\n          >\r\n            <option value=\"User\">User</option>\r\n            <option value=\"Business Owner\">Business Owner</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* General Error */}\r\n        {error.general && (\r\n          <p className=\"text-sm text-red-500 text-center\">{error.general}</p>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full py-2 px-4 bg-sky-800 text-white rounded hover:opacity-80 transition-opacity\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? 'Registering...' : 'Register'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAIe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,UAAU;QACV,UAAU;QACV,UAAU;QACV,MAAM;IACR;IAEA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACjC,UAAU;QACV,SAAS;IACX;IAEA,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,eAAe,CAAC;QACpB,YAAY;YAAE,GAAG,QAAQ;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;QAC3D,SAAS;YAAE,UAAU;YAAI,SAAS;QAAG,IAAI,wBAAwB;IACnE;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;YAAE,UAAU;YAAI,SAAS;QAAG;QAErC,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,2CAA2C;gBACjE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,IAAI,KAAK,OAAO,CAAC,QAAQ,CAAC,aAAa;oBACrC,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,UAAU,KAAK,OAAO;wBAAC,CAAC;gBACvD,OAAO;oBACL,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,SAAS,KAAK,OAAO;wBAAC,CAAC;gBACtD;gBACA,WAAW;gBACX;YACF;YAEA,6DAA6D;YAC7D,MAAM;YACN,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,SAAS;gBAA0C,CAAC;YACjF,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA2D;;;;;;0BACzE,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCAGtC,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAC3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,OAAO,SAAS,QAAQ;gCACxB,UAAU;gCACV,QAAQ;gCACR,WAAU;;;;;;4BAEX,MAAM,QAAQ,kBACb,6LAAC;gCAAE,WAAU;0CAA6B,MAAM,QAAQ;;;;;;;;;;;;kCAK5D,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAC3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,OAAO,SAAS,QAAQ;gCACxB,UAAU;gCACV,QAAQ;gCACR,WAAU;;;;;;;;;;;;kCAKd,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAC3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,OAAO,SAAS,QAAQ;gCACxB,UAAU;gCACV,QAAQ;gCACR,WAAU;;;;;;;;;;;;kCAKd,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAC3D,6LAAC;gCACC,MAAK;gCACL,OAAO,SAAS,IAAI;gCACpB,UAAU;gCACV,WAAU;;kDAEV,6LAAC;wCAAO,OAAM;kDAAO;;;;;;kDACrB,6LAAC;wCAAO,OAAM;kDAAiB;;;;;;;;;;;;;;;;;;oBAKlC,MAAM,OAAO,kBACZ,6LAAC;wBAAE,WAAU;kCAAoC,MAAM,OAAO;;;;;;kCAGhE,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU;kCAET,UAAU,mBAAmB;;;;;;;;;;;;;;;;;;AAKxC;GAlIwB;KAAA","debugId":null}}]
}