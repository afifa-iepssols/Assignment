{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/components/Pagination.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\ninterface PaginationProps {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (newPage: number) => void;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = ({ currentPage, totalPages, onPageChange }) => {\r\n  return (\r\n    <div className=\"flex justify-center mt-8 gap-4\">\r\n      <button\r\n        onClick={() => onPageChange(Math.max(currentPage - 1, 1))}\r\n        disabled={currentPage === 1}\r\n        className=\"px-4 py-2 bg-gray-200 rounded disabled:opacity-50 text-zinc-800\"\r\n      >\r\n        Previous\r\n      </button>\r\n      <span className=\"text-lg font-medium\">\r\n        Page {currentPage} of {totalPages}\r\n      </span>\r\n      <button\r\n        onClick={() => onPageChange(Math.min(currentPage + 1, totalPages))}\r\n        disabled={currentPage === totalPages}\r\n        className=\"px-4 py-2 bg-gray-200 rounded disabled:opacity-50 text-zinc-800\"\r\n      >\r\n        Next\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n"],"names":[],"mappings":";;;;AAAA;;AASA,MAAM,aAAwC,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE;IACtF,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS,IAAM,aAAa,KAAK,GAAG,CAAC,cAAc,GAAG;gBACtD,UAAU,gBAAgB;gBAC1B,WAAU;0BACX;;;;;;0BAGD,6LAAC;gBAAK,WAAU;;oBAAsB;oBAC9B;oBAAY;oBAAK;;;;;;;0BAEzB,6LAAC;gBACC,SAAS,IAAM,aAAa,KAAK,GAAG,CAAC,cAAc,GAAG;gBACtD,UAAU,gBAAgB;gBAC1B,WAAU;0BACX;;;;;;;;;;;;AAKP;KAtBM;uCAwBS","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/adminPage/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useUser } from \"../components/UserContext\";\r\nimport Pagination from \"../components/Pagination\";\r\n\r\ninterface Business {\r\n  _id: string;\r\n  name: string;\r\n  category: string;\r\n  description: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const [businesses, setBusinesses] = useState<Business[]>([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 10; // Customize as needed\r\n\r\n  const { user, loading } = useUser();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    fetchBusinesses();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading && (!user || user.role !== \"Admin\")) {\r\n      router.replace(\"/unauthorized\");\r\n    }\r\n  }, [user, loading, router]);\r\n\r\n  const fetchBusinesses = async () => {\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/business/viewBizs');\r\n      const data = await res.json();\r\n      setBusinesses(data.businesses);\r\n    } catch (error) {\r\n      console.error('Failed to fetch Businesses', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    const confirmed = confirm('Are you sure you want to delete this business?');\r\n    if (!confirmed) return;\r\n\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/business/deleteBiz/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (res.ok) {\r\n        setBusinesses((prev) => prev.filter((biz) => biz._id !== id));\r\n      } else {\r\n        console.error('Failed to delete business');\r\n      }\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (id: string) => {\r\n    router.push(`/update-business/${id}`);\r\n  };\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(businesses.length / itemsPerPage);\r\n  const paginatedBusinesses = businesses.slice(\r\n    (currentPage - 1) * itemsPerPage,\r\n    currentPage * itemsPerPage\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Admin Dashboard - All Businesses</h1>\r\n      <table className=\"min-w-full border\">\r\n        <thead className=\"bg-gray-100\">\r\n          <tr>\r\n            <th className=\"text-left p-2\">Name</th>\r\n            <th className=\"text-left p-2\">Category</th>\r\n            <th className=\"text-left p-2\">Description</th>\r\n            <th className=\"text-left p-2\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {paginatedBusinesses.map((biz) => (\r\n            <tr key={biz._id} className=\"border\">\r\n              <td className=\"p-2\">{biz.name}</td>\r\n              <td className=\"p-2\">{biz.category}</td>\r\n              <td className=\"p-2 overflow-hidden text-ellipsis whitespace-nowrap\">\r\n                {biz.description}\r\n              </td>\r\n              <td className=\"p-2 space-x-2\">\r\n                <button\r\n                  className=\"px-3 py-1 bg-sky-950 text-white rounded hover:opacity-50 cursor-pointer\"\r\n                  onClick={() => handleUpdate(biz._id)}\r\n                >\r\n                  Update\r\n                </button>\r\n                <button\r\n                  className=\"px-3 py-1 bg-pink-800 text-white rounded hover:opacity-50 cursor-pointer\"\r\n                  onClick={() => handleDelete(biz._id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Reusable Pagination Component */}\r\n      <Pagination\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        onPageChange={(page) => setCurrentPage(page)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}