{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Desktop/project/Business-Directory/Business-Directory/frontend/src/utils/uploadthing.ts"],"sourcesContent":["import {\r\n    generateUploadButton,\r\n    generateUploadDropzone,\r\n  } from \"@uploadthing/react\";\r\n  \r\n\r\n  import type { OurFileRouter } from \"../app/api/uploadthing/core\";\r\n  \r\n  export const UploadButton = generateUploadButton<OurFileRouter>();\r\n  export const UploadDropzone = generateUploadDropzone<OurFileRouter>();\r\n  "],"names":[],"mappings":";;;;AAAA;;AAQS,MAAM,eAAe,CAAA,GAAA,0KAAA,CAAA,uBAAoB,AAAD;AACxC,MAAM,iBAAiB,CAAA,GAAA,0KAAA,CAAA,yBAAsB,AAAD","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Desktop/project/Business-Directory/Business-Directory/frontend/src/app/components/ImageUpload.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { UploadButton } from \"../../utils/uploadthing\";\r\n\r\ntype UploadResult = {\r\n  name: string;\r\n  url: string;\r\n  key: string;\r\n};\r\n\r\ninterface ImageUploadProps {\r\n  onUploadComplete: (data: UploadResult) => void;\r\n  initialUrl?: string; // âœ… New prop for showing existing image\r\n}\r\n\r\nexport default function ImageUpload({ onUploadComplete, initialUrl }: ImageUploadProps) {\r\n  const [previewUrl, setPreviewUrl] = useState(initialUrl || \"\");\r\n\r\n  useEffect(() => {\r\n    if (initialUrl) {\r\n      setPreviewUrl(initialUrl);\r\n    }\r\n  }, [initialUrl]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-4 items-center\">\r\n      <UploadButton\r\n        endpoint=\"imageUploader\"\r\n        onClientUploadComplete={(res) => {\r\n          const uploaded = res[0];\r\n          const result = {\r\n            name: uploaded.name,\r\n            url: uploaded.ufsUrl,\r\n            key: uploaded.key,\r\n          };\r\n          setPreviewUrl(uploaded.ufsUrl);\r\n          onUploadComplete(result);\r\n        }}\r\n        onUploadError={(error) => {\r\n          alert(`Upload Error: ${error.message}`);\r\n        }}\r\n        appearance={{\r\n          button: \"bg-sky-800 hover:bg-sky-950 text-white font-semibold px-4 py-2 rounded shadow\",\r\n          container: \"flex justify-center\",\r\n        }}\r\n      />\r\n\r\n      {previewUrl && (\r\n        <div className=\"w-48 h-48 rounded overflow-hidden border border-gray-300 shadow\">\r\n          <img\r\n            src={previewUrl}\r\n            alt=\"Uploaded Logo\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAFA;;;AAee,SAAS,YAAY,EAAE,gBAAgB,EAAE,UAAU,EAAoB;;IACpF,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,cAAc;IAE3D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,YAAY;gBACd,cAAc;YAChB;QACF;gCAAG;QAAC;KAAW;IAEf,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,8HAAA,CAAA,eAAY;gBACX,UAAS;gBACT,wBAAwB,CAAC;oBACvB,MAAM,WAAW,GAAG,CAAC,EAAE;oBACvB,MAAM,SAAS;wBACb,MAAM,SAAS,IAAI;wBACnB,KAAK,SAAS,MAAM;wBACpB,KAAK,SAAS,GAAG;oBACnB;oBACA,cAAc,SAAS,MAAM;oBAC7B,iBAAiB;gBACnB;gBACA,eAAe,CAAC;oBACd,MAAM,CAAC,cAAc,EAAE,MAAM,OAAO,EAAE;gBACxC;gBACA,YAAY;oBACV,QAAQ;oBACR,WAAW;gBACb;;;;;;YAGD,4BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,KAAK;oBACL,KAAI;oBACJ,WAAU;;;;;;;;;;;;;;;;;AAMtB;GA3CwB;KAAA","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Desktop/project/Business-Directory/Business-Directory/frontend/src/app/AddBusiness/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport ImageUpload from \"../components/ImageUpload\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useUser } from \"../components/UserContext\";\r\n\r\nexport default function AddNewBusiness() {\r\n  const { user, loading } = useUser();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading && (!user || user.role !== \"Business Owner\")) {\r\n      router.replace(\"/unauthorized\");\r\n    }\r\n  }, [user, loading, router]);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    address: \"\",\r\n    state: \"\",\r\n    country: \"\",\r\n    zipCode: \"\",\r\n    description: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    website: \"\",\r\n  });\r\n\r\n  const [logoData, setLogoData] = useState<{\r\n    key: string;\r\n    url: string;\r\n    name: string;\r\n  } | null>(null);\r\n\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    if (!logoData) {\r\n      setError(\"Please upload a logo.\");\r\n      return;\r\n    }\r\n\r\n    const businessPayload = {\r\n      name: form.name,\r\n      category: form.category,\r\n      location: {\r\n        address: form.address,\r\n        state: form.state,\r\n        country: form.country,\r\n        zipCode: form.zipCode,\r\n      },\r\n      description: form.description,\r\n      contactInfo: {\r\n        phone: form.phone,\r\n        email: form.email,\r\n        website: form.website,\r\n      },\r\n      logo: {\r\n        filename: logoData.name,\r\n        url: logoData.url,\r\n        key: logoData.key,\r\n      },\r\n    };\r\n\r\n    try {\r\n      setIsSubmitting(true);\r\n      const res = await fetch(\"http://localhost:5000/api/business/addBiz\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(businessPayload),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        setError(data.message || \"Error creating business.\");\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      alert(\"Business created successfully!\");\r\n      router.push(\"/\"); // or your business list page\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Something went wrong. Please try again.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"max-w-xl mx-auto p-6 rounded shadow space-y-4 text-neutral-50\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Add New Business</h2>\r\n\r\n      {error && <div className=\"text-red-600\">{error}</div>}\r\n\r\n      <input name=\"name\" onChange={handleChange} value={form.name} placeholder=\"Business Name\" className=\"w-full p-2 border rounded\" required />\r\n\r\n      <select name=\"category\" onChange={handleChange} value={form.category} className=\"w-full p-2 border rounded\" required>\r\n        <option value=\"\">Select Category</option>\r\n        {[\"Retail\", \"Manufacturing\", \"Services\", \"Technology\", \"Agriculture\", \"Healthcare\", \"Finance\", \"Real Estate\", \"Logistics\", \"Hospitality\", \"Other\"].map((cat) => (\r\n          <option key={cat} value={cat}>{cat}</option>\r\n        ))}\r\n      </select>\r\n\r\n      <input name=\"address\" onChange={handleChange} value={form.address} placeholder=\"Address\" className=\"w-full p-2 border rounded\" required />\r\n      <input name=\"state\" onChange={handleChange} value={form.state} placeholder=\"State\" className=\"w-full p-2 border rounded\" />\r\n      <input name=\"country\" onChange={handleChange} value={form.country} placeholder=\"Country\" className=\"w-full p-2 border rounded\" required />\r\n      <input name=\"zipCode\" onChange={handleChange} value={form.zipCode} placeholder=\"ZIP Code\" className=\"w-full p-2 border rounded\" required />\r\n\r\n      <textarea name=\"description\" onChange={handleChange} value={form.description} placeholder=\"Description\" className=\"w-full p-2 border rounded\" required />\r\n\r\n      <input name=\"phone\" onChange={handleChange} value={form.phone} placeholder=\"Phone\" className=\"w-full p-2 border rounded\" required />\r\n      <input name=\"email\" onChange={handleChange} value={form.email} placeholder=\"Email\" className=\"w-full p-2 border rounded\" required />\r\n      <input name=\"website\" onChange={handleChange} value={form.website} placeholder=\"Website (optional)\" className=\"w-full p-2 border rounded\" />\r\n\r\n      <div>\r\n      <label className=\"block text-center font-semibold mb-2\">Upload Logo</label>\r\n        <ImageUpload onUploadComplete={(data) => setLogoData(data)} />\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={isSubmitting}\r\n        className=\"w-full bg-sky-800 text-white py-2 rounded hover:bg-sky-950 disabled:opacity-50\"\r\n      >\r\n        {isSubmitting ? \"Submitting...\" : \"Submit\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}