{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/utils/uploadthing.ts"],"sourcesContent":["import {\r\n    generateUploadButton,\r\n    generateUploadDropzone,\r\n  } from \"@uploadthing/react\";\r\n  \r\n\r\n  import type { OurFileRouter } from \"../app/api/uploadthing/core\";\r\n  \r\n  export const UploadButton = generateUploadButton<OurFileRouter>();\r\n  export const UploadDropzone = generateUploadDropzone<OurFileRouter>();\r\n  "],"names":[],"mappings":";;;;AAAA;;AAQS,MAAM,eAAe,CAAA,GAAA,0KAAA,CAAA,uBAAoB,AAAD;AACxC,MAAM,iBAAiB,CAAA,GAAA,0KAAA,CAAA,yBAAsB,AAAD","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/components/ImageUpload.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { UploadButton } from \"../../utils/uploadthing\";\r\n\r\ntype UploadResult = {\r\n  name: string;\r\n  url: string;\r\n  key: string;\r\n};\r\n\r\ninterface ImageUploadProps {\r\n  onUploadComplete: (data: UploadResult) => void;\r\n  initialUrl?: string; // âœ… New prop for showing existing image\r\n}\r\n\r\nexport default function ImageUpload({ onUploadComplete, initialUrl }: ImageUploadProps) {\r\n  const [previewUrl, setPreviewUrl] = useState(initialUrl || \"\");\r\n\r\n  useEffect(() => {\r\n    if (initialUrl) {\r\n      setPreviewUrl(initialUrl);\r\n    }\r\n  }, [initialUrl]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-4 items-center\">\r\n      <UploadButton\r\n        endpoint=\"imageUploader\"\r\n        onClientUploadComplete={(res) => {\r\n          const uploaded = res[0];\r\n          const result = {\r\n            name: uploaded.name,\r\n            url: uploaded.ufsUrl,\r\n            key: uploaded.key,\r\n          };\r\n          setPreviewUrl(uploaded.ufsUrl);\r\n          onUploadComplete(result);\r\n        }}\r\n        onUploadError={(error) => {\r\n          alert(`Upload Error: ${error.message}`);\r\n        }}\r\n        appearance={{\r\n          button: \"bg-sky-800 hover:bg-sky-950 text-white font-semibold px-4 py-2 rounded shadow\",\r\n          container: \"flex justify-center\",\r\n        }}\r\n      />\r\n\r\n      {previewUrl && (\r\n        <div className=\"w-48 h-48 rounded overflow-hidden border border-gray-300 shadow\">\r\n          <img\r\n            src={previewUrl}\r\n            alt=\"Uploaded Logo\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAFA;;;AAee,SAAS,YAAY,EAAE,gBAAgB,EAAE,UAAU,EAAoB;;IACpF,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,cAAc;IAE3D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,YAAY;gBACd,cAAc;YAChB;QACF;gCAAG;QAAC;KAAW;IAEf,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,8HAAA,CAAA,eAAY;gBACX,UAAS;gBACT,wBAAwB,CAAC;oBACvB,MAAM,WAAW,GAAG,CAAC,EAAE;oBACvB,MAAM,SAAS;wBACb,MAAM,SAAS,IAAI;wBACnB,KAAK,SAAS,MAAM;wBACpB,KAAK,SAAS,GAAG;oBACnB;oBACA,cAAc,SAAS,MAAM;oBAC7B,iBAAiB;gBACnB;gBACA,eAAe,CAAC;oBACd,MAAM,CAAC,cAAc,EAAE,MAAM,OAAO,EAAE;gBACxC;gBACA,YAAY;oBACV,QAAQ;oBACR,WAAW;gBACb;;;;;;YAGD,4BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,KAAK;oBACL,KAAI;oBACJ,WAAU;;;;;;;;;;;;;;;;;AAMtB;GA3CwB;KAAA","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Business-Directory/frontend/src/app/UpdateBusiness/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { UploadButton } from \"../../../utils/uploadthing\"; // Adjust path as needed\r\nimport ImageUpload from \"../../components/ImageUpload\";\r\n\r\ninterface Business {\r\n  _id: string;\r\n  name: string;\r\n  category: string;\r\n  description: string;\r\n  logo?: { url: string; key: string };\r\n  location: {\r\n    address: string;\r\n    state?: string;\r\n    country: string;\r\n    zipCode: string;\r\n  };\r\n  contactInfo: {\r\n    phone: string;\r\n    email: string;\r\n    website?: string;\r\n  };\r\n}\r\n\r\nconst categories = [\r\n  'Retail', 'Manufacturing', 'Services', 'Technology', 'Agriculture', 'Healthcare',\r\n  'Finance', 'Real Estate', 'Logistics', 'Hospitality', 'Other'\r\n];\r\n\r\nexport default function UpdateBusinessPage() {\r\n  const { id } = useParams();\r\n  const router = useRouter();\r\n\r\n  const [business, setBusiness] = useState<Business | null>(null);\r\n  const [form, setForm] = useState<any>({});\r\n  const [logo, setLogo] = useState<{ url: string; key: string } | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchBusiness = async () => {\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/api/business/viewBiz/${id}`);\r\n        const data = await res.json();\r\n        setBusiness(data.Biz);\r\n        setForm(data.Biz);\r\n        setLogo(data.Biz.logo);\r\n      } catch (err) {\r\n        console.error(\"Error:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    if (id) fetchBusiness();\r\n  }, [id]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    if (name.startsWith(\"location.\") || name.startsWith(\"contactInfo.\")) {\r\n      const [group, field] = name.split(\".\");\r\n      setForm((prev: any) => ({\r\n        ...prev,\r\n        [group]: { ...prev[group], [field]: value }\r\n      }));\r\n    } else {\r\n      setForm((prev: any) => ({ ...prev, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      const updated = {\r\n        ...form,\r\n        logo: logo ? { url: logo.url, key: logo.key } : undefined\r\n      };\r\n      const res = await fetch(`http://localhost:5000/api/business/updateBiz/${id}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(updated)\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        alert(\"Business updated!\");\r\n        router.push(`/business/${id}`);\r\n      } else {\r\n        alert(data.message || \"Update failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"p-6\">Loading...</div>;\r\n  if (!business) return <div className=\"p-6 text-red-600\">Business not found.</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6\">\r\n      <h1 className=\"text-3xl font-semibold mb-6\">Update Business</h1>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input name=\"name\" value={form.name || \"\"} onChange={handleChange} placeholder=\"Name\" className=\"w-full border p-2\" />\r\n        <select name=\"category\" value={form.category || \"\"} onChange={handleChange} className=\"w-full border p-2 bg-neutral-950 text-neutral-50\">\r\n          <option value=\"\">Select Category</option>\r\n          {categories.map((cat) => <option key={cat} value={cat}>{cat}</option>)}\r\n        </select>\r\n        <textarea name=\"description\" value={form.description || \"\"} onChange={handleChange} placeholder=\"Description\" className=\"w-full border p-2\" />\r\n        \r\n        <h3 className=\"font-medium\">Location</h3>\r\n        <input name=\"location.address\" value={form.location?.address || \"\"} onChange={handleChange} placeholder=\"Address\" className=\"w-full border p-2\" />\r\n        <input name=\"location.state\" value={form.location?.state || \"\"} onChange={handleChange} placeholder=\"State\" className=\"w-full border p-2\" />\r\n        <input name=\"location.country\" value={form.location?.country || \"\"} onChange={handleChange} placeholder=\"Country\" className=\"w-full border p-2\" />\r\n        <input name=\"location.zipCode\" value={form.location?.zipCode || \"\"} onChange={handleChange} placeholder=\"Zip Code\" className=\"w-full border p-2\" />\r\n        \r\n        <h3 className=\"font-medium\">Contact Info</h3>\r\n        <input name=\"contactInfo.phone\" value={form.contactInfo?.phone || \"\"} onChange={handleChange} placeholder=\"Phone\" className=\"w-full border p-2\" />\r\n        <input name=\"contactInfo.email\" value={form.contactInfo?.email || \"\"} onChange={handleChange} placeholder=\"Email\" className=\"w-full border p-2\" />\r\n        <input name=\"contactInfo.website\" value={form.contactInfo?.website || \"\"} onChange={handleChange} placeholder=\"Website\" className=\"w-full border p-2\" />\r\n\r\n        <div className=\"mt-4\">\r\n        <p className=\"text-center font-semibold mb-2\">Update Logo</p> {/* Bold and center-aligned text */}\r\n        <ImageUpload\r\n            initialUrl={logo?.url}\r\n            onUploadComplete={(result) => {\r\n            setLogo({ url: result.url, key: result.key });\r\n            }}\r\n        />\r\n        </div>\r\n        <button\r\n            type=\"submit\"\r\n            className=\"block w-full mt-6 px-4 py-2 bg-sky-800 text-white rounded hover:bg-sky-950 text-center\"\r\n            >\r\n            Update\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}